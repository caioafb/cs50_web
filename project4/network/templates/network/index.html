{% extends "network/layout.html" %}

{% block body %}
    <h2>All Posts</h2>
    {% if user.is_authenticated %}
        <div class="card">
            <h4>New Post</h4>
            <form action="{% url 'new_post' %}" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <textarea class="form-control" name="content" required></textarea>
                </div>
                <input class="btn btn-primary" type="submit" value="Post">
            </form>
        </div>
    {% endif %}

    {% for post in posts %}
        <div class="card">
            <p><b><a href="{% url 'profile' post.user.username %}" style="color: black;">{{ post.user }}</a></b> <small>on {{ post.date }}</small></p>
            <p>{{ post.content }}</p>
            <p class="likes"><small>Likes: {{ post.likes }}</small></p>
        </div>    
    {% empty %}
        <div class="card">
            No posts yet.
        </div>
    {% endfor %}
    
{% endblock %}